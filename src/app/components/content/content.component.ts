/*====================================================================================*/
/*  IMPORTACIONES DE ANGULAR
/*====================================================================================*/
import { Component, OnInit, Input } from '@angular/core';
/*====================================================================================*/
/*  IMPORTACIONES DE LIBERÍAS DE TERCEROS
/*====================================================================================*/
import Swal from 'sweetalert2';
/*====================================================================================*/
/*  CONFIGURACIONES DEL COMPONENTE
/*====================================================================================*/
@Component({
  selector: 'app-content',
  templateUrl: './content.component.html',
  styleUrls: ['./content.component.css']
})
/*====================================================================================*/
/*  INICIO DEL COMPONENTE
/*====================================================================================*/
export class ContentComponent implements OnInit {
  /*==================================================================================*/
  /*  DEFINICIÓN DE ATRIBUTOS
  /*==================================================================================*/
  /*----------------------------------------------------------------------------------*/
  /*  Datos provenientes de los componentes de usuario, hospital y doctor.
  /*----------------------------------------------------------------------------------*/
  @Input() title: string;
  @Input() model: any;
  @Input() collection: string;
  /*----------------------------------------------------------------------------------*/
  /*  Variables de la imagen.
  /*----------------------------------------------------------------------------------*/
  image: File;
  temporal: any;
  /*==================================================================================*/
  /*  CONSTRUCTOR
  /*==================================================================================*/
  constructor() {}
  /*==================================================================================*/
  /*  FUNCIÓN DE INICIO
  /*==================================================================================*/
  ngOnInit() {}
  /*==================================================================================*/
  /*  FUNCIÓN CONTROLAR LA IMAGEN
  /*==================================================================================*/
  charged(image: File) {
    if (image) {
      if (image.type.indexOf('image') >= 0) {
        this.image = image;
        /*----------------------------------------------------------------------------*/
        /*  Se genera la vista previa de la imagen.
      /*----------------------------------------------------------------------------*/
        const reader = new FileReader();
        const temporalUrl = reader.readAsDataURL(image);
        reader.onloadend = () => (this.temporal = reader.result);
      } else {
        this.image = undefined;
        /*--------------------------------------------------------------------------*/
        /*  Se notifica al usuario que ha ocurrido un error.
        /*--------------------------------------------------------------------------*/
        Swal.fire({
          title: '¡Un momento!',
          text: 'El archivo seleccionado no es una imagen.',
          type: 'warning'
        });
      }
    }
  }
}
